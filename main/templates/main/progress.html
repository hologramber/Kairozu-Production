{% extends 'kairozu.html' %}
{% block title %}Kairozu Progress{% endblock %}

{% load static %}
{% load humanize %}
{% block content %}

<div class="fc-basic">
    {% if user.profile.pendingchapter > user.profile.currentchapter %}
        <h1>You've completed Chapter {{ user.profile.currentchapter }}, congrats!</h1>
        <h3>Meet these goals to unlock the next chapter.</h3>
    {% else %}
        <h1>You're currently working on Chapter {{ user.profile.currentchapter }}.</h1>
        <h3>After completing the material from this chapter, you'll need to meet these goals to unlock the next one.</h3>
    {% endif %}
</div>

<div class="fc-spaceb">
    <div class="fc-flex-20 margin-20">
        {% if user.profile.vrcount > 75 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Fewer than 75 <a href="{% url 'main:reviewvocab' %}">vocabulary reviews</a>.<div class="is-small italics">You have {{ user.profile.vrcount }}.</div></div>
    </div>
    <div class="fc-flex-20 margin-20">
        {% if user.profile.ercount > 25 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Fewer than 25 <a href="{% url 'main:reviewexpression' %}">expression reviews</a>.<div class="is-small italics">You have {{ user.profile.ercount }}.</div></div>
    </div>
    <div class="fc-flex-20 margin-20">
        {% if user.profile.srcount > 100 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Fewer than 100 <a href="{% url 'main:reviewsentence' %}">sentence reviews</a>.<div class="is-small italics">You have {{ user.profile.srcount }}.</div></div>
    </div>
    <div class="fc-flex-20 margin-20">
        {% if vmastery < 80 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Achieve a mastery level of 80%.<div class="is-small italics">Your current mastery level is <span class="bold">{{ vmastery|floatformat:0 }}%</span> for the material you've covered so far.</div></div>
    </div>
</div>
<div class="fc-basic">
    <h4>Preview upcoming reviews for material you're in the process of mastering below. Each correct answer will increase the level of that review by 1 star; incorrect answers will reset the level to 0 stars. Material that you've already mastered with 3+ stars isn't shown on this list, but will continue to appear in your reviews according to the <a href="https://en.wikipedia.org/wiki/Spaced_repetition">spaced repetition algorithm</a>.</h4>

    <div class="table-responsive">
        <table class="vocablist">
            <tbody>
                <tr class="nobottom">
                    <td colspan="4" class="resourceheader"><h3><i class="fa fa-puzzle-piece"></i> Vocabulary</h3></td>
                </tr>
                <tr class="text-align-left nobottom">
                    <th>Chapter</th><th>English</th><th>Review Available</th><th>Level</th>
                </tr>
                {% for v in vocabs %}
                    <tr{% if forloop.last %} class='nobottom'{% endif %}>
                        <td><a href="{% url 'main:vocablist' v.vocab.chapter.id %}">第 {{ v.vocab.chapter.id }} 章</a></td>
                        <td class="min300">{{ v.vocab.english }}</td>
                        {% if 'ago' in v.next_review|naturaltime %}
                            <td>Available now!</td>
                        {% else %}
                            <td>{{ v.next_review|naturaltime }}</td>
                        {% endif %}

                        {% if v.score == 0 %}
                            <td class="green-words nowrap"><i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif v.score == 1 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif v.score == 2 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% else %}
                            <td></td>
                        {% endif %}
                    </tr>
                {% endfor %}
                <tr class="nobottom">
                    <td colspan="4"><h3><i class="fa fa-commenting-o"></i> Expressions</h3></td>
                </tr>
                <tr class="text-align-left nobottom">
                    <th>Chapter</th><th>English</th><th>Review Available</th><th>Level</th>
                </tr>
                {% for e in expressions %}
                    <tr{% if forloop.last %} class='nobottom'{% endif %}>
                        <td><a href="{% url 'main:expressionlist' e.express.chapter.id %}">第 {{ e.express.chapter.id }} 章</a></td>
                        <td>{{ e.express.english }}</td>
                        {% if 'ago' in e.next_review|naturaltime %}
                            <td>Available now!</td>
                        {% else %}
                            <td>{{ e.next_review|naturaltime }}</td>
                        {% endif %}

                        {% if e.score == 0 %}
                            <td class="green-words nowrap"><i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif e.score == 1 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif e.score == 2 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% else %}
                            <td></td>
                        {% endif %}
                    </tr>
                {% endfor %}
                <tr class="nobottom">
                    <td colspan="4"><h3><i class="fa fa-book"></i> Sentences</h3></td>
                </tr>
                <tr class="text-align-left nobottom">
                    <th>Lesson</th><th>English</th><th>Review Available</th><th>Level</th>
                </tr>
                {% for s in sentences %}
                    <tr{% if forloop.last %} class='nobottom'{% endif %}>
                        <td><a href="{% url 'main:lesson' s.sentence.lesson.id %}">第 {{ s.sentence.lesson.chapter.id }} 章</a></td>
                        <td>{{ s.sentence.english }}</td>
                        {% if 'ago' in s.next_review|naturaltime %}
                            <td>Available now!</td>
                        {% else %}
                            <td>{{ s.next_review|naturaltime }}</td>
                        {% endif %}

                        {% if s.score == 0 %}
                            <td class="green-words nowrap"><i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif s.score == 1 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif s.score == 2 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% else %}
                            <td></td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
<div class="s-100"></div>

{% endblock %}
