{% extends 'kairozu.html' %}
{% block title %}Kairozu Progress{% endblock %}

{% load static %}
{% load humanize %}
{% block content %}

<div class="fc-basic">
    {% if user.profile.pendingchapter > user.profile.currentchapter %}
        <h1>You've completed Chapter {{ user.profile.currentchapter }}, congrats!</h1>
        <h3>Meet these goals to unlock the next chapter.</h3>
    {% else %}
        <h1>You're currently working on Chapter {{ user.profile.currentchapter }}.</h1>
        <h3>After completing the material from this chapter, you'll need to meet these goals to unlock the next one.</h3>
    {% endif %}
</div>

<div class="fc-spaceb">
    <div class="fc-flex-20 margin-20">
        {% if user.profile.vrcount > 75 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Fewer than 75 <a href="{% url 'main:reviewvocab' %}">vocabulary reviews</a>.<div class="is-small italics">You have {{ user.profile.vrcount }}.</div></div>
    </div>
    <div class="fc-flex-20 margin-20">
        {% if user.profile.ercount > 25 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Fewer than 25 <a href="{% url 'main:reviewexpression' %}">expression reviews</a>.<div class="is-small italics">You have {{ user.profile.ercount }}.</div></div>
    </div>
    <div class="fc-flex-20 margin-20">
        {% if user.profile.srcount > 100 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Fewer than 100 <a href="{% url 'main:reviewsentence' %}">sentence reviews</a>.<div class="is-small italics">You have {{ user.profile.srcount }}.</div></div>
    </div>
    <div class="fc-flex-20 margin-20">
        {% if vmastery < 80 %}
            <div class="spot-image"><i class='fa fa-square-o fa-3x red-words' aria-hidden='true'></i></div>
        {% else %}
            <div class="spot-image"><i class='fa fa-check-square-o fa-3x green-words' aria-hidden='true'></i></div>
        {% endif %}
        <div class="spot-text">Achieve a mastery level of 80%.<div class="is-small italics">Your current mastery level is <span class="bold">{{ vmastery|floatformat:0 }}%</span> for the material you've covered so far.</div></div>
    </div>
</div>
<div class="fc-basic">
    <h4>Below is a sampling of upcoming reviews for the vocabulary words, expressions, and sentences you're in the process of mastering. Each correct answer will increase the level of that review by 1 star; incorrect answers will reset the level to 0 stars. Material that you've already mastered (3+ stars) isn't shown on this list, but will continue to appear in your reviews.</h4>
    <div class="s-20"></div>
    <div class="table-responsive">
        <table class="vocablist">
            <thead>
                <tr class="text-align-left">
                    <th>Chapter</th><th>English</th><th>Review Available</th><th>Level</th>
                </tr>
            </thead>
            <tbody>
                {% for obj in object_list %}
                    <tr>
                    {% if obj.vocab %}
                        <td><a href="{% url 'main:vocablist' obj.vocab.chapter.id %}">第 {{ obj.vocab.chapter.id }} 章</a></td>
                        <td>{{ obj.vocab.english }}</td>
                    {% elif obj.sentence %}
                        <td><a href="{% url 'main:lesson' obj.sentence.lesson.id %}">第 {{ obj.sentence.lesson.chapter.id }} 章</a></td>
                        <td>{{ obj.sentence.english }}</td>
                    {% elif obj.express %}
                        <td><a href="{% url 'main:expressionlist' obj.express.chapter.id %}">第 {{ obj.express.chapter.id }} 章</a></td>
                        <td>{{ obj.express.english }}</td>
                    {% else %}
                        <td>? - ?</td>
                        <td>unknown</td>
                    {% endif %}
                        {% if 'ago' in obj.next_review|naturaltime %}
                            <td>Available now!</td>
                        {% else %}
                            <td>{{ obj.next_review|naturaltime }}</td>
                        {% endif %}

                        {% if obj.score == 0 %}
                            <td class="green-words nowrap"><i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif obj.score == 1 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% elif obj.score == 2 %}
                            <td class="green-words nowrap"><i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star" aria-hidden="true"></i>&nbsp;<i class="fa fa-star-o" aria-hidden="true"></i></td>
                        {% else %}
                            <td></td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="s-100"></div>

{% endblock %}
